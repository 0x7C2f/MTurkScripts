function CheckModuleViewScript() { } function PageChange(n, t, i, r, u, f, e, o, s, h, c, l, a, v, y, p) { var w = "ResizeDialogOverlay('ModuleInstanceEdit', undefined, true);"; e == "" ? GetContent(FullPath + "/cms/UserControls/ModuleView/ModuleViewRendererWrapper.aspx?DomainID=" + n + "&PageID=" + t + "&ModuleInstanceID=" + y + "&PageModuleInstanceID=" + l + "&Tag=" + encodeURIComponent(c) + "&PageNumber=" + v + "&RenderLoc=" + i + "&FromRenderLoc=" + r + "&IsMoreExpandedView=" + f + "&EnableQuirksMode=" + u + (h != undefined || h != "" ? "&Filter=" + encodeURIComponent(h) : "") + "&ScreenWidth=" + $(window).width() + "&ViewID=" + a, p, 2, w) : GetContent(FullPath + "/cms/UserControls/ModuleView/ModuleViewRendererWrapper.aspx?DomainID=" + n + "&PageID=" + t + "&ModuleInstanceID=" + y + "&PageModuleInstanceID=" + l + "&Tag=" + encodeURIComponent(c) + "&PageNumber=" + v + "&RenderLoc=" + i + "&FromRenderLoc=" + r + "&GroupYear=" + o + "&GroupMonth=" + s + "&GroupByField=" + e + "&IsMoreExpandedView=" + f + "&EnableQuirksMode=" + u + (h != undefined && h != "" ? "&Filter=" + encodeURIComponent(h) : "") + "&ScreenWidth=" + $(window).width() + "&ViewID=" + a, p, 2, w) } function NewButtonClick(n, t, i, r, u, f, e, o, s, h) { var c = $("#hid-pmi-id").val(); OpenDialogOverlay("WindowLargeModal", { LoadType: "U", LoadURL: FullPath + "/cms/UserControls/ModuleView/ModuleViewRendererWrapper.aspx?DomainID=" + t + "&PageID=" + i + "&ModuleInstanceID=" + r + "&PageModuleInstanceID=" + u + "&ViewID=" + n + "&RenderLoc=2&FromRenderLoc=" + o + "&FlexDataID=0&EnableQuirksMode=" + s + "&LockEnabled=" + h }) } function EditButtonClick(n, t, i, r, u, f, e, o, s, h) { var c = $("#hid-pmi-id").val(); OpenDialogOverlay("WindowLargeModal", { LoadType: "U", LoadURL: FullPath + "/cms/UserControls/ModuleView/ModuleViewRendererWrapper.aspx?DomainID=" + t + "&PageID=" + i + "&ModuleInstanceID=" + r + "&PageModuleInstanceID=" + u + "&ViewID=" + n + "&RenderLoc=2&FromRenderLoc=" + o + "&FlexDataID=" + f + "&EnableQuirksMode=" + s + "&LockEnabled=" + h }) } function LoadSort(n, t, i, r, u, f, e) { OpenDialogOverlay("WindowMediumModal", { LoadType: "U", LoadURL: FullPath + "/cms/UserControls/ModuleView/FlexDataSortListWrapper.aspx?DomainID=" + n + "&PageID=" + t + "&ModuleInstanceID=" + i + "&DisplayField=" + u + "&Heading=" + f + "&Description=" + e + "&RenderLoc=" + r }) } function OpenViewInDialogButtonClick(n, t, i, r, u, f, e, o, s, h, c, l, a) { var v, y; window.event ? (v = window.event.srcElement, $target = $(v)) : (v = c, $target = $(c.target)); y = $("#hid-pmi-id").val(); y == undefined ? ($target.parents("div[id^='pmi-']").attr("id") != undefined && (y = $target.parents("div[id^='pmi-']").attr("id").substring(4)), OpenDialogOverlay("WindowMediumModal", { LoadType: "U", LoadURL: FullPath + "/cms/UserControls/ModuleView/ModuleViewRendererWrapper.aspx?DomainID=" + t + "&PageID=" + i + "&PageModuleInstanceID=" + u + "&ModuleInstanceID=" + r + "&ViewID=" + n + "&RenderLoc=" + e + "&FromRenderLoc=" + o + "&FlexDataID=" + f + "&EnableQuirksMode=" + s + "&LockEnabled=" + h + (a != undefined && a != "" ? "&Filter=" + encodeURIComponent(a) : "") })) : OpenDialogOverlay("WindowMediumModal", { LoadType: "U", LoadURL: FullPath + "/cms/UserControls/ModuleView/ModuleViewRendererWrapper.aspx?DomainID=" + t + "&PageID=" + i + "&PageModuleInstanceID=" + u + "&ModuleInstanceID=" + r + "&ViewID=" + n + "&RenderLoc=" + e + "&FromRenderLoc=" + o + "&FlexDataID=" + f + "&EnableQuirksMode=" + s + "&LockEnabled=" + h + (a != undefined && a != "" ? "&Filter=" + encodeURIComponent(a) : "") }) } function OpenViewButtonClick(n, t, i, r, u, f, e, o, s, h, c, l, a, v) { var p, y; window.event ? (p = window.event.srcElement, $target = $(p)) : (p = l, $target = $(l.target)); y = $("#hid-pmi-id").val(); y == undefined && $target.parents("div[id^='pmi-']").attr("id") != undefined && (y = $target.parents("div[id^='pmi-']").attr("id").substring(4)); y == undefined && (y = f); window.location = FullPath + "/site/default.aspx?PageType=2&PageModuleInstanceID=" + y + "&ViewID=" + n + "&RenderLoc=" + o + "&FlexDataID=" + e + (v != undefined && v != "" ? "&Filter=" + encodeURIComponent(v) : "") } function SearchFromDialogButtonClick() { var n = BuildFilterString(); CloseDialogOverlay("WindowLargeModal"); CloseDialogOverlay("WindowMediumModal"); CloseDialogOverlay("WindowSmallModal"); setTimeout('RefreshView("' + n + '");', 100) } function SearchButtonClick(n, t, i, r, u, f, e, o, s, h, c, l) { var a = BuildFilterString(); OpenViewButtonClick(n, "", t, i, r, u, f, e, o, s, h, c, l, a) } function MoreViewClick(n) { DisableButton(n.id, "working...") } function UpdateOrganizeRecords(n) { var t = $("#hidModuleInstanceID" + n).val(); if ($("#flexdatasortlist-hid-sortorder").val()) { var i = "{ModuleInstanceID: " + t + ", SortOrder: '" + $("#flexdatasortlist-hid-sortorder").val() + "'}"; CallController(FullPath + "/cms/UserControls/ModuleView/ModuleViewController.aspx/UpdateFlexDataSortOrder", i, 'CloseDialogOverlay("WindowMediumModal");RefreshView();ShowNotification("Success! You changed your organization.");', "CallControllerFailure(result[0].errormessage);") } else CloseDialogOverlay("WindowMediumModal"), ShowNotification("There are no records to update.") } function SaveButtonClick(n, t, i, r, u, f, e, o, s, h, c, l) { $("#pnl-moduleview-validate") === undefined ? SaveData(n, e, c, l) : $("#pnl-moduleview-validate").validate({ onSuccess: SaveValidatedData, params: { ViewID: n, RenderLoc: e, e: c, Button: l } }) } function SaveValidatedData(n) { SaveData(n.ViewID, n.RenderLoc, n.e, n.Button) } function SaveData(n, t, i, r) { var o, f, s, u, h, b, k; DisableButton(r.id); window.event ? (evt = window.event.srcElement, $target = $(evt)) : (evt = i, $target = $(i.target)); o = $("#hidModuleInstanceID" + t).val(); f = 0; $("#hidFlexDataID" + t).val() != undefined && (f = $("#hidFlexDataID" + t).val()); s = !1; u = "["; $("[name^='swdata-']").each(function () { var n; u != "[" && (u = u + ","); u = u + "['" + $(this).attr("name").substring(7) + "',"; $(this).val() == "WYSIWYG" ? (n = addslashes(eval("Get" + $(this).attr("id") + "HTML();")), n.replace(/\r\n/g, ""), u = u + "'" + n + "']") : $(this).val() == "NextGenWYSIWYG" ? (n = addslashes(tinymce.editors[$(this).attr("id").substring(7)].getContent()), n.replace(/\r\n/g, ""), u = u + "'" + n + "']", $("#hidIsContentApp").val() !== undefined && $("#hidIsContentApp").val() != null && (s = !0)) : u = $(this).is("textarea") && !$(this).hasClass("ui-txt-embed") ? u + "'" + addslashes($(this).val()).replace(/\n/g, "&#xd;").replace(/\\\"/g, "&quot;").replace(/\\\'/g, "&#39;") + "']" : $(this).attr("type") == "checkbox" ? u + "'" + $("#" + $(this).attr("id")).is(":checked") + "']" : $(this).attr("datatype") == "html" ? u + "'" + addslashes($(this).val()) + "']" : u + "'" + addslashes($(this).val()).replace(/\\\"/g, "&quot;").replace(/\\\'/g, "&#39;") + "']" }); u = u + "]"; var c = "", l = "", a = !0, v = "", y = ""; $("#sw-start-date") !== undefined && $("#sw-start-date") != null && $("#sw-start-date").length > 0 && (c = $("#sw-start-date").val()); $("#sw-end-date") !== undefined && $("#sw-end-date") != null && $("#sw-end-date").length > 0 && (l = $("#sw-end-date").val()); $("#sw-record-active") !== undefined && $("#sw-record-active") != null && $("#sw-record-active").length > 0 && (a = $("#sw-record-active").is(":checked")); $("#sw-record-tags") !== undefined && $("#sw-record-tags") != null && $("#sw-record-tags").length > 0 && (v = $("#sw-record-tags").val()); $("#sw-record-attachments") !== undefined && $("#sw-record-attachments") != null && $("#sw-record-attachments").length > 0 && (y = addslashes($("#sw-record-attachments").val()).replace(/\\\"/g, "&quot;").replace(/\\\'/g, "&#39;")); var d = t == 3 ? "false" : "true", p = "", w = "", e = ""; f == 0 && (p = $("input[id='permissionview-hid-users']").length > 0 ? $("#permissionview-hid-users").val() : "", w = $("input[id='permissionview-hid-groups']").length > 0 ? $("#permissionview-hid-groups").val() : ""); h = 1; $("#hidCheckContentForLegacyTags") !== undefined && (h = $("#hidCheckContentForLegacyTags").val() === "True" ? 1 : 0); b = "{RecordID: " + f + ", ModuleInstanceID: " + o + ", Data: " + u + ", StartDate: '" + c + "', EndDate: '" + l + "', Approved: " + d + ", Active: " + a + ", UserRoles: '" + p + "', GroupRoles: '" + w + "', Tags: '" + v + "', LegacyData: " + h + ", Attachments: '" + y + "'}"; e = r.id == "contentalert-btn-create" ? "LoadContentAlertDialog('','','FlexDataID',result[0].flexdataid,'CloseDialogOverlay(\"WindowLargeModal\"); CloseDialogOverlay(\"WindowMediumModal\"); CloseDialogOverlay(\"WindowSmallModal\");');RefreshView();" : $(r).attr("continue") == "true" ? $(r).attr("continuecallback") + "('sw-module-" + o + "'); EnableButton(\"" + r.id + '","Save and New");' : s ? "if (result[0].flexdataid != undefined) {$('#hidFlexDataID" + t + "').val(result[0].flexdataid);} EnableButton('" + r.id + "');CloseDialogOverlay('WindowLargeModal'); CloseDialogOverlay('WindowMediumModal'); CloseDialogOverlay('WindowSmallModal');RefreshView();" : "CloseDialogOverlay('WindowLargeModal'); CloseDialogOverlay('WindowMediumModal'); CloseDialogOverlay('WindowSmallModal');RefreshView();"; $(r).attr("growlmessage") !== undefined && $(r).attr("growlmessage") !== "" && (e = e + "ShowNotification('" + $(r).attr("growlmessage") + "');"); k = "EnableButton('" + r.id + "');CallControllerFailure(result[0].errormessage);"; CallController(FullPath + "/cms/UserControls/ModuleView/ModuleViewController.aspx/SaveModuleRecord", b, e, k) } function ClearLock(n, t, i, r) { DisableButton(r.id); var u = "{FlexDataID: " + n + "}", f = t, e = "EnableButton('" + r.id + "', 'Cancel');CallControllerFailure(result[0].errormessage);"; CallController(FullPath + "/cms/UserControls/ModuleView/ModuleViewController.aspx/ClearLock", u, f, e) } function DeleteButtonClick(n, t, i, r, u, f, e, o, s, h, c, l) { var a; a = $(l).attr("confirmmessage") !== undefined ? $(l).attr("confirmmessage") : "Are you sure you want to delete this record?"; swalert(a, "Delete", "critical", "yesno", DeleteRecord, DoNothing, DoNothing, { ViewID: n, FlexDataID: f, MIID: r, e: c, GrowlMessage: $(l).attr("growlmessage") }) } function DoNothing() { } function DeleteRecord(n) { var i, t, r; i = n.MIID !== undefined ? "{RecordID: " + n.FlexDataID + ", ModuleInstanceID: " + n.MIID + "} " : "{RecordID: " + n.FlexDataID + "} "; t = "RefreshView();"; r = "CallControllerFailure(result[0].errormessage);"; n.GrowlMessage !== undefined && n.GrowlMessage !== "" && (t = t + "ShowNotification('" + n.GrowlMessage + "');"); n.MIID !== undefined ? CallController(FullPath + "/cms/UserControls/ModuleView/ModuleViewController.aspx/DeleteModuleRecord", i, t, r) : CallController(FullPath + "/cms/UserControls/ModuleView/ModuleViewController.aspx/DeleteModuleRecordOnly", i, t, r) } function CancelButtonClick(n, t, i, r, u, f, e, o, s, h, c) { console.log("moduleview"); DeleteVideoAttachmentInCancelAction(); CloseDialogOverlay("WindowLargeModal"); CloseDialogOverlay("WindowMediumModal"); CloseDialogOverlay("WindowSmallModal"); e == 1 && CloseDialogOverlay("ModuleInstanceEdit"); c === !0 ? ReloadWorkspace() : setTimeout("RefreshView();", 100) } function singleRecordCancel() { var n = $("#hid-mipage-id").val(); console.log("singlerecordcancel"); n == 0 ? ReloadWorkspace() : LoadPageEditFull(n) } function ExportButtonClick(n) { document.location.href = FullPath + "/cms/UserControls/ModuleView/ModuleViewExport.aspx?ModuleInstanceID=" + n } function MakeDataObject() { } function chkSidebar() { $(".ui-widget-sidebar").each(function () { $.trim($(this).html()) != "" && ($(this).show(), $(this).siblings(".ui-widget-detail").addClass("with-sidebar")) }) } function BuildFilterString() { var n = ""; return $("[name^='swdata-']").each(function () { $(this).val() != "" && (n != "" && (n = n + ";"), n = n + $(this).attr("name").substring(7) + ":", n = $(this).attr("type") == "checkbox" ? n + $("#" + $(this).attr("id")).is(":checked") : $(this).attr("type") == "radio" ? n + $("#" + $(this).attr("id")).is(":checked") : n + $(this).val().replace(/\\\:/g, "&#58;").replace(/\\\;/g, "&#59;").trimRight()) }), n = n + "" } function SendEmail(n, t, i, r, u) { var f = "{ToEmailAddress: '" + n + "', FromEmailAddress: '" + t + "', Subject: '" + i + "', Body: '" + r + "'}", e = FullPath + "/cms/UserControls/ModuleView/ModuleViewController.aspx/SendEmail"; $.ajax({ type: "POST", url: e, data: f, async: !1, contentType: "application/json; charset=utf-8", dataType: "json", cache: !1, success: function (n) { u(n.d) }, headers: { "X-Csrf-Token": GetCookie("CSRFToken") } }) } var FullPath = $("#hidFullPath").val();